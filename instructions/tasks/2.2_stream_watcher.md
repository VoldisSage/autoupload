# Task 2.2 – Stream watcher (online/offline events)

## Description
Implement a watcher that periodically checks the Twitch stream state and emits events when the stream goes online or offline.

## Definition of Done
- A file `src/services/streamWatcher.ts` exists with:
  - `type StreamStatusEvent = "online" | "offline"`
  - `type StreamStatusHandler = (event: StreamStatusEvent) => void`
  - `function startStreamWatcher(handler: StreamStatusHandler): void`
- `startStreamWatcher`:
  - Uses `isStreamLive()` from `twitchService`.
  - Polls Twitch every `twitch.pollIntervalSeconds` (from config).
  - Maintains internal state (`isLive` flag) to detect transitions:
    - `false -> true` ⇒ call `handler("online")`
    - `true -> false` ⇒ call `handler("offline")`
- Any errors during polling are caught and logged to console but do not crash the process.

## Tests
- Create `dev/testStreamWatcher.ts` that:
  - Calls `startStreamWatcher` with a handler that logs `EVENT: online` or `EVENT: offline`.
- Add npm script:
  - `"dev:test-watcher": "ts-node dev/testStreamWatcher.ts"` or equivalent.
- Run `npm run dev:test-watcher` and observe:
  - It periodically prints the correct event when you start/stop a Twitch stream during manual testing.

## Files to create / modify
- `src/services/streamWatcher.ts`
- `dev/testStreamWatcher.ts`
- `package.json` (add dev test script)
